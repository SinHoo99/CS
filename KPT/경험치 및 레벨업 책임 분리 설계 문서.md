# ğŸ¯ ê²½í—˜ì¹˜ ë° ë ˆë²¨ì—… ì±…ì„ ë¶„ë¦¬ ì„¤ê³„ ë¬¸ì„œ

## 1. ë¬¸ì œ ìƒí™©

ê¸°ì¡´ì˜ `Player.cs` ìŠ¤í¬ë¦½íŠ¸ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ê¸°ëŠ¥ì„ ëª¨ë‘ í¬í•¨í•˜ê³  ìˆë‹¤:

- í”Œë ˆì´ì–´ ì…ë ¥ ì²˜ë¦¬ (PlayerController ì—°ê²°)
- ìƒíƒœ ë¨¸ì‹ (FSM) ê´€ë¦¬
- ì• ë‹ˆë©”ì´ì…˜ ì´ë²¤íŠ¸ ì—°ë™
- LineShadow ìœ„ì¹˜ ì—…ë°ì´íŠ¸
- **ê²½í—˜ì¹˜ ì¦ê°€ ë° ë ˆë²¨ì—… ì²˜ë¦¬ (AddExperience / LevelUp)**

ì´ ì¤‘ **ê²½í—˜ì¹˜ ë° ë ˆë²¨ì—… ì²˜ë¦¬**ëŠ” í”Œë ˆì´ì–´ì˜ ê²Œì„ ë‚´ ì„±ì¥ê³¼ ê´€ë ¨ëœ **ë…ë¦½ì ì¸ ë„ë©”ì¸ ë¡œì§**ì„ì—ë„ ë¶ˆêµ¬í•˜ê³   
Player ìŠ¤í¬ë¦½íŠ¸ì— ì§ì ‘ í¬í•¨ë˜ì–´ ìˆìŒ.

---

## 2. ì™œ ë¬¸ì œê°€ ë˜ëŠ”ê°€?

| ë¬¸ì œì  | ì„¤ëª… |
|--------|------|
| âŒ **ë‹¨ì¼ ì±…ì„ ì›ì¹™(SRP) ìœ„ë°˜** | Player.csê°€ ë„ˆë¬´ ë§ì€ ì±…ì„ì„ ê°€ì§ |
| âŒ **ê²°í•©ë„ ì¦ê°€** | Player â†’ GameManager, PlayerData, LevelCalculator ë“± ë§ì€ ì˜ì¡´ |
| âŒ **í…ŒìŠ¤íŠ¸ ì–´ë ¤ì›€** | ê²½í—˜ì¹˜ ë¡œì§ë§Œ í…ŒìŠ¤íŠ¸í•˜ë ¤ í•´ë„ Player ì „ì²´ë¥¼ ìƒì„±í•´ì•¼ í•¨ |
| âŒ **í™•ì¥ ë¶ˆë¦¬** | ë ˆë²¨ì—… ë°©ì‹ì´ë‚˜ ê²½í—˜ì¹˜ ë¡œì§ì„ ë°”ê¾¸ê¸° ì–´ë µê³  ë¦¬ìŠ¤í¬ ìˆìŒ |

---

## 3. ë¦¬íŒ©í† ë§ ë°©í–¥

### âœ… ë°©í–¥: ê²½í—˜ì¹˜/ë ˆë²¨ì—… ë¡œì§ì„ **ì „ë‹´ í´ë˜ìŠ¤**ë¡œ ë¶„ë¦¬

#### ì¶”ì²œ í´ë˜ìŠ¤ëª…
- `PlayerStats.cs` ë˜ëŠ”  
- `PlayerProgress.cs`

#### ì„ íƒì ìœ¼ë¡œ ì¸í„°í˜ì´ìŠ¤ ë„ì…
- `IPlayerProgress` (ì¶”ìƒí™” ë° í…ŒìŠ¤íŠ¸ìš©)

---

### â–¶ Player.cs (ë³€ê²½ í›„)

```csharp
public class Player : MonoBehaviour
{
    public PlayerStats Stats { get; private set; }

    private void Awake()
    {
        Stats = new PlayerStats(GameManager.Instance.NowPlayerData);
    }

    public void GainExp(float amount)
    {
        Stats.AddExperience(amount);
    }
}
```
```
public class PlayerStats
{
    private PlayerData _playerData;

    public PlayerStats(PlayerData data)
    {
        _playerData = data;
    }

    public void AddExperience(float amount)
    {
        _playerData.CurEXP += amount;
        EventBus.Publish(new ExpGainedEvent(amount));

        while (PlayerLevelCalculator.CanLevelUp(_playerData.CurEXP, _playerData.Level))
        {
            _playerData.CurEXP -= PlayerLevelCalculator.GetRequiredExpForLevel(_playerData.Level);
            LevelUp();
        }
    }

    private void LevelUp()
    {
        _playerData.Level++;
        EventBus.Publish(new LevelUpEvent(_playerData.Level));
    }
}
```
